{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45375111-d1e8183fd09326f55157dfb1e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    const data = response.data;\n\n    if (data.totalHits === 0) {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please, try again!'\n      );\n    }\n\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n","import iziToast from 'izitoast';\n\nexport function renderGallery(images, galleryElement) {\n  const markup = images.map(image => createCardMarkup(image)).join('');\n  galleryElement.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction createCardMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n    <a href=\"${largeImageURL}\" class=\"gallery__item\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"gallery__image\"/>\n      <div class=\"gallery__info\">\n        <p><b>Likes:</b> ${likes}</p>\n        <p><b>Views:</b> ${views}</p>\n        <p><b>Comments:</b> ${comments}</p>\n        <p><b>Downloads:</b> ${downloads}</p>\n      </div>\n    </a>\n  `;\n}\n\nexport function clearGallery(galleryElement) {\n  galleryElement.innerHTML = '';\n}\n\nexport function showNotification(message, type = 'info') {\n  iziToast[type]({\n    title: type.charAt(0).toUpperCase() + type.slice(1),\n    message: message,\n    position: 'topRight',\n    backgroundColor: '#ef4040',\n    titleColor: '#fafafb',\n    messageColor: '#fafafb',\n    borderBottom: '2px solid #ffbebe',\n    borderRadius: '4px',\n    padding: '20px',\n    width: '432px',\n    height: '88px',\n    fontSize: '16px',\n    fontWeight: '400',\n    lineHeight: '1.5',\n    letterSpacing: '0.03em',\n    messageMaxWidth: '100%',\n    messageOverflow: 'hidden',\n    wordBreak: 'break-word',\n    wordWrap: 'break-word',\n  });\n}\n\nexport function showLoader(loaderElement) {\n  loaderElement.classList.add('visible');\n}\n\nexport function hideLoader(loaderElement) {\n  loaderElement.classList.remove('visible');\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  clearGallery,\n  showNotification,\n  showLoader,\n  hideLoader,\n} from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst galleryElement = document.querySelector('.gallery');\nconst loaderElement = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet lightbox = new SimpleLightbox('.gallery a');\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = event.currentTarget.elements.searchQuery.value.trim();\n\n  if (query === '') {\n    showNotification('Please enter a search query', 'warning');\n    return;\n  }\n\n  clearGallery(galleryElement);\n  page = 1;\n  await fetchAndRenderImages();\n});\n\nasync function fetchAndRenderImages() {\n  try {\n    showLoader(loaderElement);\n    const data = await fetchImages(query, page);\n\n    if (data.hits.length === 0) {\n      showNotification(\n        'Sorry, there are no images matching your search query. Please, try again!',\n        'error'\n      );\n      loadMoreButton.classList.add('hidden');\n      return;\n    }\n\n    renderGallery(data.hits, galleryElement);\n    lightbox.refresh();\n\n    if (page * 15 >= data.totalHits) {\n      loadMoreButton.classList.add('hidden');\n      showNotification(\n        \"We're sorry, but you've reached the end of search results.\",\n        'info'\n      );\n    } else {\n      loadMoreButton.classList.remove('hidden');\n    }\n\n    smoothScrollToNext();\n  } catch (error) {\n    showNotification(error.message, 'error');\n  } finally {\n    hideLoader(loaderElement);\n  }\n}\n\nfunction observeLoadMore() {\n  loadMoreButton.addEventListener('click', async () => {\n    page += 1;\n    await fetchAndRenderImages();\n  });\n}\n\nfunction smoothScrollToNext() {\n  const galleryItem = document.querySelector('.gallery__item');\n  if (galleryItem) {\n    const { height } = galleryItem.getBoundingClientRect();\n    window.scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nloadMoreButton.classList.add('hidden');\nobserveLoadMore();\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","data","axios","error","renderGallery","images","galleryElement","markup","image","createCardMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showNotification","message","type","iziToast","showLoader","loaderElement","hideLoader","form","loadMoreButton","lightbox","SimpleLightbox","event","fetchAndRenderImages","smoothScrollToNext","observeLoadMore","galleryItem","height"],"mappings":"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"}